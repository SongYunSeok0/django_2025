{% extends 'blog/base.html'%}
{% block main-area %}
<div class="col-lg-8">
    <article>
        <!-- Post header-->
        <header class="mb-4">
            <!-- Post title-->
            <h1 class="fw-bolder mb-1">{{post.title}}</h1>
            <!-- Post meta content-->
            <div class="text-muted fst-italic mb-2">Posted on {{ post.created_date}} by {{post.author}}</div>
            <!-- Post categories-->
             {% if post.category %}
                <a class="badge bg-secondary text-decoration-none link-light" href="#!">{{post.category.name}}</a>
            {% else %}
                <a class="badge bg-secondary text-decoration-none link-light" href="#!">미분류</a>
            {% endif %}
            <a class="btn btn-primary" href="/blog/{{post.pk}}/delete/">글지우기</a>
            <a class="btn btn-success" href="/blog/{{post.pk}}/update/">글수정하기</a>
        </header>
        <!-- Preview image figure-->
        <figure class="mb-4">
            {% if post.uploaded_image %}
                <img class="img-fluid rounded" src={{ post.uploaded_image.url }} alt="..." />
            {% else %}
                <img class="img-fluid rounded" src="https://dummyimage.com/800x800/ced4da/6c757d.jpg" alt="..." />
            {% endif %}
        </figure>
            {% if post.uploaded_file %}
            <button><a href={{post.uploaded_file.url}} download>download</a></button>
            {% endif %}
        <!-- Post content-->
        <section class="mb-5">
            <p class="fs-5 mb-4">{{post.content}}</p>
        </section>
    </article>

<section class="mb-5">
    <div class="card bg-light">
        <div class="card-body">
        
            <!-- 댓글 목록 -->
            {% for comment in comments %}
            <div class="d-flex align-items-start border-bottom mb-3 pb-3">
                <!-- 프로필 이미지 -->
                <div class="flex-shrink-0 me-3">
                    <img class="rounded-circle" src="https://dummyimage.com/50x50/ced4da/6c757d.jpg" alt="..." />
                </div>
            
                <!-- 댓글 내용 영역 -->
                <div class="flex-grow-1 w-100">
                    <!-- 작성자 + 날짜 + 버튼 (한 줄) -->
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <strong style="font-size: 1.2em;">{{ comment.author }}</strong>
                            <span class="text-muted ms-2" style="font-size: 0.9em;">
                                ({{ comment.created_date|date:"Y-m-d H:i" }})
                            </span>
                        </div>
                        <div>
                            <a href="{% url 'updatecomment' comment.pk %}" class="btn btn-sm btn-outline-primary me-1" style="font-size: 0.75em;">수정</a>
                            <a href="{% url 'deletecomment' comment.pk %}" class="btn btn-sm btn-outline-primary" style="font-size: 0.75em;">삭제</a>
                        </div>
                    </div>
                
                    <!-- 댓글 본문 (아래줄) -->
                    <div class="mt-1">
                        <span style="font-size: 1.1em;">{{ comment.comment }}</span>
                    </div>
                </div>
            </div>

            {% endfor %}

            <!-- 댓글 작성 폼 -->
            <form method="post" action="{% url 'createcomment' post.pk %}" class="mt-4">
                {% csrf_token %}
                
                <div class="mb-3">
                    <label for="{{ commentform.author.id_for_label }}" class="form-label">작성자</label>
                    {{ commentform.author }}
                </div>  

                <div class="mb-3">
                    <label for="{{ commentform.comment.id_for_label }}" class="form-label">댓글</label>
                    {{ commentform.comment }}
                </div>

                <button type="submit" class="btn btn-primary">제출</button>
            </form>

        </div>
    </div>
</section>
</div>
{% endblock %}


{% block header %}
    <h1 class="fw-bolder">상세 페이지</h1>
{% endblock %}